# –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞

# –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ Go —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
if (-not (Get-Command "go" -ErrorAction SilentlyContinue)) {
    Write-Host "‚ùå –û—à–∏–±–∫–∞: Go –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Go." -ForegroundColor Red
    exit 1
}

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –∫–æ—Ä–Ω–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
$rootDir = $PSScriptRoot
Set-Location $rootDir

# –°–∫–∞—á–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
Write-Host "üì• –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π..." -ForegroundColor Cyan
go mod download

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
if ($LASTEXITCODE -ne 0) {
    Write-Host "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π." -ForegroundColor Red
    exit 1
}

# –°–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
Write-Host "üî® –°–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è..." -ForegroundColor Cyan
go build -o bin/bottest.exe ./cmd

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
if ($LASTEXITCODE -ne 0) {
    Write-Host "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è." -ForegroundColor Red
    exit 1
}

Write-Host "‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ —Å–æ–±—Ä–∞–Ω–æ: bin/bottest.exe" -ForegroundColor Green
Write-Host ""
Write-Host "üöÄ –ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞:" -ForegroundColor Yellow
Write-Host "  .\bin\bottest.exe run --token=YOUR_TOKEN --quiz=1 --bots=3" -ForegroundColor Yellow
Write-Host ""
Write-Host "üîç –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø—Ä–∞–≤–∫–∏ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º:" -ForegroundColor Yellow
Write-Host "  .\bin\bottest.exe --help" -ForegroundColor Yellow
Write-Host "  .\bin\bottest.exe run --help" -ForegroundColor Yellow 